<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>OpenClaw Desktop</title>
    <link rel="stylesheet" href="./styles.css" />
  </head>
  <body>
    <main class="layout">
      <header class="topbar">
        <div>
          <p class="eyebrow">OpenClaw Desktop</p>
          <h1>Operations Home</h1>
        </div>
        <button id="reloadButton" type="button">Reconnect gateway</button>
      </header>

      <section id="healthBanner" class="health-banner" data-state="disconnected">Gateway disconnected</section>

      <section class="gateway-panel">
        <p class="gateway-label">Gateway target</p>
        <code id="gatewayUrl"></code>
        <p id="statusMessage" class="status-message" role="status" aria-live="polite">Preparing gateway stream…</p>
        <p id="errorState" class="error-message" role="alert" aria-live="assertive" hidden></p>
      </section>

      <section id="loadingState" class="state-panel">Loading native dashboard projections…</section>
      <section id="disconnectedState" class="state-panel" hidden>Gateway disconnected. Reconnect to resume live operations updates.</section>
      <section id="emptyState" class="state-panel" hidden>No activity yet. Waiting for gateway events.</section>

      <section class="dashboard-grid" aria-label="Operations overview">
        <article class="card">
          <h2>Connection</h2>
          <p id="kpiConnection">connecting</p>
        </article>
        <article class="card">
          <h2>Queue depth</h2>
          <p id="kpiQueueDepth">0</p>
        </article>
        <article class="card">
          <h2>Active runs</h2>
          <p id="kpiActiveRuns">0</p>
        </article>
        <article class="card">
          <h2>Failures (1h)</h2>
          <p id="kpiFailures">0</p>
        </article>
        <article class="card">
          <h2>Uptime</h2>
          <p id="kpiUptime">0h 0m 0s</p>
        </article>
        <article class="card">
          <h2>Active agents</h2>
          <p id="kpiActiveAgents">0</p>
        </article>
      </section>

      <section class="panel" aria-label="Recent activity">
        <h2>Activity feed</h2>
        <ul id="activityFeed" class="feed-list" aria-live="polite" aria-label="Recent gateway activity"></ul>
      </section>

      <section class="panel" aria-label="Training orchestration">
        <h2>Training orchestration records (external execution)</h2>
        <p class="panel-note">Execution stays external to this shell; these are projected lifecycle records only.</p>
        <div class="training-grid">
          <div>
            <h3>Dataset curation queue</h3>
            <p id="trainingDatasetQueue">0</p>
          </div>
          <div>
            <h3>Evaluation run records</h3>
            <p id="trainingEvalRuns">0</p>
          </div>
          <div>
            <h3>Retrain trigger jobs</h3>
            <p id="trainingRetrainJobs">0</p>
          </div>
          <div>
            <h3>Model registry records</h3>
            <p id="trainingRegistry">0</p>
          </div>
        </div>
              <div class="training-records-grid">
          <div>
            <h3>Dataset curation records</h3>
            <ul id="datasetRecords" class="record-list"></ul>
          </div>
          <div>
            <h3>Evaluation run records</h3>
            <ul id="evaluationRecords" class="record-list"></ul>
          </div>
          <div>
            <h3>Retrain jobs</h3>
            <ul id="retrainRecords" class="record-list"></ul>
          </div>
          <div>
            <h3>Model registry entries</h3>
            <ul id="registryRecords" class="record-list"></ul>
          </div>
        </div>
      </section>

      <section class="workspace" aria-label="OpenClaw workspace fallback">
        <h2>Gateway workspace fallback</h2>
        <iframe id="gatewayFrame" title="OpenClaw Gateway" referrerpolicy="no-referrer"></iframe>
      </section>
    </main>

    <script type="module" src="./renderer.js"></script>
  </body>
</html>
